define(["require","exports","module","jquery","lodash","./parse"],function(e,t,n){function o(e,t,n){var r=this.generatePipeId(e);e.data(this.pipeIdDataAttribute,r);var i=this.pipe(r,t,n).to(e);return i}var r=e("jquery"),i=e("lodash"),s=e("./parse");n.exports=function(t,n){i.each(t,function(e){var t=r(e),u={},a=t.metaData(n);i.each(a,function(e,n){i.each(e,function(e){var r=s.destProp(e);if(r.selector){var i=t.find(r.selector),a={};a[n]=r,o.call(this,i,a)}else u[n]?u[n].push(r):u[n]=[r]},this)},this),o.call(this,t,u)},this)}});