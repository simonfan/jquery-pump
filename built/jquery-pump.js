//     jquery-pump
//     (c) simonfan
//     jquery-pump is licensed under the MIT terms.

define("__jquery-pump/parse",["require","exports","module","jquery"],function(t,e){function r(t){var e=t.split(s),r=e.shift();return{method:r,args:e}}function i(t){var e=t.match(a),i=r(e[3]);return{format:e[1],selector:e[2],method:i.method,args:i.args}}var s=(t("jquery"),/\s*:\s*/g);e.methodString=r;var a=/(?:(.+?)\s*\|)?(?:(.+?)\s*->)?\s*(.+)\s*/;e.destProp=i}),define("__jquery-pump/build-pipes",["require","exports","module","jquery","lodash","./parse"],function(t,e,r){function i(t,e,r){var i=this.generatePipeId(t);t.data(this.pipeIdDataAttribute,i);var s=this.pipe(i,e,r).to(t);return s}var s=t("jquery"),a=t("lodash"),u=t("./parse");r.exports=function(t,e){a.each(t,function(t){var r=s(t),n={},p=r.metaData(e);a.each(p,function(t,e){a.each(t,function(t){var s=u.destProp(t);if(s.selector){var a=r.find(s.selector),p={};p[e]=s,i.call(this,a,p)}else n[e]?n[e].push(s):n[e]=[s]},this)},this),i.call(this,r,n)},this)}}),define("__jquery-pump/getter-setter",["require","exports","module","jquery","lodash"],function(t,e){function r(t,e){var r=t[e];if(!r)throw new Error("[jquery-pump|destGet] "+e+" could not be found on formats hash.");return r}var i=(t("jquery"),t("lodash"));e.destGet=function(t,e){var i=t[e.method].apply(t,e.args);if(e.format){var s=r(this.formats,e.format);return s.parse?s.parse.call(this,i):i}return i},e.destSet=function(t,e,s){if(e.format){var a=r(this.formats,e.format);s=a.stringify?a.stringify.call(this,s):s}var u=i.clone(e.args);return u.push(s),t[e.method].apply(t,u)}}),define("__jquery-pump/id",["require","exports","module"],function(t,e){e.generatePipeId=function(){return _.uniqueId(this.pipeIdDataAttribute)},e.pipeIdDataAttribute="jq-pipe-id"}),define("jquery-pump",["require","exports","module","pump","jquery","jquery-meta-data","lodash","./__jquery-pump/build-pipes","./__jquery-pump/getter-setter","./__jquery-pump/id"],function(t,e,r){var i=t("pump"),s=t("jquery"),a=(t("jquery-meta-data"),t("lodash")),u=t("./__jquery-pump/build-pipes"),n=["destGet","destSet","srcGet","srcSet"],p=r.exports=i.extend({initialize:function(t,e){e=e||{};var r=e.destination;a.defaults(e,this.metaDataOptions),a.defaults(e,{prefix:this.prefix}),a.each(n,function(t){this[t]&&(this[t]=a.bind(this[t],this))},this),this.formats=e.formats||this.formats,i.prototype.initialize.call(this,t),u.call(this,r,e)},formats:{},prefix:"pipe",metaDataOptions:{parse:function(t){return t.split(/\s*,\s*/g)}},drain:function(t,e,r){return t=t instanceof s?t.data(this.pipeIdDataAttribute):t,i.prototype.drain.call(this,t,e,r)}});p.assignProto(t("./__jquery-pump/getter-setter")).assignProto(t("./__jquery-pump/id")),s.prototype.pump=function(t,e){return e=e||{},e.destination=this,p(t,e)}});